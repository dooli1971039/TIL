# Chap 08. 경계

시스템이 들어가는 모든 소프트웨어를 직접 개발하는 경우는 드물다. 패키지를 사거나 오픈소스를 이용하기도 하는데, 이 외부 코드를 우리 코드에 깔끔하게 통합하는 것이 중요하다.

## 외부코드 사용하기

-   인터페이스 제공자와 인터페이스 사용자 사이에는 특유의 긴장이 존재한다. 패키지 제공자나 프레임워크 제공자는 적용성을 최대한 넓혀 많은 고객을 얻으려는 반면, 사용자는 자신의 요구에 집중하는 인터페이스를 바란다.  
    => 이러한 긴장으로 인해 시스템 경계에서 문제가 생길 소지가 많다.

ex) 프로그램에서 map을 만들어서 여기 저기에 넘겼다. 넘겨받은 쪽에서 map.clear()를 해버릴 수도 있다. map 사용자라면 누구나 map 내용을 지워버릴 권한이 있다는 의미이다.

## 경계 살피고 익히기

-   더 짧은 시간에 더 많은 기능을 출시하기 위해 우리는 외부 코드를 사용한다.
-   외부 패키지에 대한 테스트는 우리 책임은 아니지만, 우리 자신을 위해 우리가 사용할 코드를 테스트 해보는 것은 바람직하다.

-   외부 코드를 익히는 것, 외부 코드를 통합하는 것은 모두 어렵고, 이 둘을 동시에 하기는 두배 더 어렵다.  
    => 우리 쪽 코드를 작성해 외부 코드를 호출하는 대신, 먼저 간단한 테스트 케이스를 작성해 외부 코드를 익히면 좋다 (이를 **학습테스트**라고 부른다.)

## 학습테스트는 공짜 이상이다.

-   학습테스트에 드는 비용은 없다. 오히려 필요한 지식만 확보하는 손 쉬운 방법이다.
-   학습테스트를 통해 패키지가 예쌍대로 도는지 검증할 수 있다.

## 깨끗한 경계

-   소프트웨어 설계가 우수하다면 변경하는데 많은 투자와 재작업이 필요하지 않다.
-   경계에 위치하는 코드는 깔끔히 분리해야 한다.
-   통제가 불가능한 외부 패키지에 의존하는 대신 통제가 가능한 우리 코드에 의존하는 편이 훨씬 좋다.
-   외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리하자.

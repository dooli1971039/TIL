# Chap 04. 주석

> 우리는 코드로 의도를 표현하지 못해, 그러니까 실패를 만회하기 위해 주석을 사용한다.  
> 주석은 언제나 실패를 의미한다.

-   주석은 오래될수록 코드에서 멀어지며, 그릇될 가능성이 커진다. 코드는 여기 저기로 옮겨지기도 하고 변하는데, 주석이 언제나 코드를 따라가지는 않기 때문이다.
-   부정확한 주석은 아예 없는 주석보다 훨씬 더 나쁘다.

-   코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문이다. 하지만 주석은 나쁜 코드를 보완하지 못하므로, 코드를 보완할 방법을 찾아야 한다.

## 좋은 주석

어떤 주석은 필요하거나 유익하다.

1. 법적인 주석

    - ex) 소스 파일 첫머리에 주석으로 들어가는 저작권/소유권 정보

2. 정보를 제공하는 주석

    - 기본적인 정보를 주석으로 제공하면 편리하다.
        ```java
        // kk:mm:ss EEE, MMM dd, yyyy 형식이다.
        Pattern timeMatcher = Pattern.compile("\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*");
        ```
        이왕이면 시각과 날짜를 변환하는 클래스를 만들어 코드를 옮기면 주석이 필요 없어져 더 깔끔하겠지만, 위와 같은 경우에는 주석이 도움 된다.

3. 의도를 설명하는 주석

    - 특정 문제를 어떤 방법으로 해결하려 했는지 적어둔 경우
    - ex) `//스레드를 대량 생성하는 방법으로 어떻게든 경쟁 조건을 만들려 시도한다.`

4. 의미를 명료하게 밝히는 주석
    - 때때로 모호한 인수나 반환값은 그 의미를 읽기 좋게 표현하면 이해하기 쉬워진다.
    - 인수나 반환값 자체를 명료하게 만들면 좋겠지만, 반환 값이 표준 라이브러리나 변경하지 못하는 코드에 속할 수도 있다.
    - ex) `assertTrue(a.compareTo(b)==-1);    // a < b`
    - 위 경우 그릇된 주석을 달아놓을 위험이 상당히 높으므로 주의해야 한다.
5. 결과를 경고하는 주석

    - 다른 프로그래머에게 결과를 경고할 목적으로 주석을 사용하기도 한다.
    - ex) `// 여유 시간이 충분하지 않다면 실행하지 마십시오.`
    - 요즘에는 @Ignore 속성을 이용해 테스트 케이스를 꺼버리기도 한다.

6. TODO 주석

    - '앞으로 할 일'을 TODO 주석으로 남겨두면 편하다.
    - 필요하다고 여기지만 당장 구현하기 어려운 업무를 기술하는데 사용한다.
    - 더 좋은 이름을 떠올려달라는 코멘트나, 더 이상 필요 없는 기능을 삭제하라는 알림 등을 적어두기도 한다.

7. 중요성을 강조하는 주석
    - 자칫 대수롭지 않다고 여겨질 뭔가의 중요성을 강조하기 위해 사용한다.

## 나쁜 주석

대다수의 주석이 **나쁜 주석**에 해당한다.  
허술한 코드를 지탱하거나, 엉성한 코드를 변명하거나, 미숙한 결정을 합리화 하는 등...

1. 주절거리는 주석

    - 이해가 안 되어 다른 모듈까지 뒤져야 하는 주석은 독자와 제대로 소통하지 못하는 주석이다.

2. 같은 이야기를 중복하는 주석

    - 주석이 코드보다 더 많은 정보를 제공하지 않는 경우
    - 모든 멤버 변수에 주석을 달아두는 경우 (필요한 경우가 있을 수도 있지만 전부 적는 것은 안 좋다)

3. 오해할 여지가 있는 주석

    - 다른 프로그래머가 주석으로 인해 코드를 잘못 이해하여, 그 부분 사용했을 때 버그가 발생하기도 한다.

4. 의무적으로 다는 주석

    - 코드를 복잡하게 만들며, 잘못된 정보를 제공할 여지만 만든다.

5. 있으나 마나 한 주석
6. 무서운 잡음

    - 복붙을 잘못해서 주석을 잘못 적는 경우도 있다.
    - /////////////////////////////// 와 같은 주석

7. 함수나 변수로 표현할 수 있다면 주석을 달지 마라
8. 위치를 표시하는 주석

    - // A 와같이 특정 기능 위에 주석을 다는 경우도 있다. 너무 자주 사용하지 않는다면 배너는 눈에 띄며 주의를 환기하지만, 남용하면 흔한 잡음으로 여겨 무시하게 된다. 아주 드물게 사용하자.

9. 닫는 괄호에 다는 주석

    - while, try 등 블록 끝에 //while 과 같은 식으로 주석을 달기도 한다. 중첩이 심하고 장황한 함수라면 의미가 있을 수도 있지만, 작고 캡슐화된 함수에는 잡음이다.

10. 공로를 돌리거나 저자를 표시하는 주석

    - git 내역을 보면 누가 수정했는지 다 알 수 있다.

11. 주석으로 처리한 코드

    - 주석으로 처리된 코드는 다른 사람들이 지우기를 주저한다. 이유가 있어 남겨놓았으리라고, 중요하니까 지우면 안 된다고 생각한다.

12. HTML 주석
13. 전역 정보

    - 주석을 달아야 한다면 근처에 있는 코드만 기술하라.
    - 함수의 인자로 포트 번호가 넘어오는데, 위에 주석으로 포트의 기본값이 \*\*\*\* 이라고 적어두면, 나중에 코드의 포트 기본값이 변했는데 주석이 바뀌지 않아 문제가 생길 수도 있다.

14. 너무 많은 정보

    - 흥미로운 역사나 관련 없는 정보를 장황하게 늘어놓지 마라.

15. 모호한 관계

    - 주석과 주석이 설명하는 코드는 둘 사이가 명백해야 한다.
    - 주석을 자체가 다시 설명을 요구하는 일은 없어야 한다.

16. 함수 헤더

    - 이름을 잘 붙이면 주석이 필요 없다.

17. 비공개 코드에서 Javadocs
    - 공개 API에서는 유요하지만, 공개하지 않을 코드라면 쓸모가 없다.
